<!doctype html>
<html ng-app="todo">
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.14/angular.min.js"></script>
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
		<script type="text/javascript" src="http://127.0.0.1:5000/app.js"></script>
		<link href="http://127.0.0.1:5000/styles.css" rel="stylesheet">
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.14/angular-route.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.14/angular-resource.min.js"></script>
	</head>
	<body>
		<p></p>
		<div id="divTodo">
		    <form ng-controller="TodosController">
			    <div class="navbar navbar-inverse navbar-fixed-top">
				    <div class="navbar-inner">
					    <div class="container-fluid">
						    <p class="navbar-text pull-right">
							    	<a href="/portal" ng-click="myPortal()"> My portal</a>
							    	&nbsp &nbsp &nbsp
							    	<a id="link" href="/myinfo">Hi, {{username}}</a>
							    	<a href="/signout" class="btn-small btn-primary ng-scope" ng-click="signout()"> Sign out</a>
						    </p>
					    </div>
				    </div>
			    </div>
		    <p></p>
			<h1 id="todoTitle" align="center"> My ToDo List </h1>
			<p></p>
		    <input required type="text" id="todoText" ng-model="todoText" size="100" style="width: 500px" placeholder="add new todo here"/>
		    <input class="btn-primary" type="submit" ng-click="addTodo()" value="Insert todo"/>
		    <p></p>
		    <span>Left: {{left()}}</span>
		    <span>Total: {{items.length}}</span>
		    <p></p>
		    <div ng-repeat="item in items">
			    <input type="checkbox" ng-model="item.done" ng-change="change(item,item.done)">
			    <input type="text" ng-model="item.task" size="100" style="width: 500px" readonly>
			    <button class="btn-primary" ng-click="deleteTodo(item,item.task)"> Delete</button>
			    <button class="btn-primary" ng-click="editTodo = true"> Edit</button>
			    <div ng-show="editTodo" class="popup">
				    <input ng-model="edittedTodo" type="text" size="100" style="width: 500px" placeholder="{{place(item.task)}}"/>
				    <button class="btn-primary" ng-click="saveTodo(edittedTodo,item.task)"> Save ToDo</button>
		    	</div>
		    </div>
		    <input type="checkbox" ng-model="mark" ng-click="markAll()"> Mark all as completed </input>
		    &nbsp &nbsp &nbsp
		    <input type="checkbox" ng-model="unmark" ng-click="unmarkAll()"> Unmark all as completed </input>
		    <p></p>
		    <button class="btn-primary" ng-if="left() != items.length && left()!=0" ng-click="deleteAllCompleted()"> Delete All Completed</button>
		    <p></p>
		    <span ng-if="left()==0 && items.length!=0" class="animate-if">
		    	<button class="btn-primary" ng-click="deleteAll()"> Delete All</button>
			</span>
		    </form>      
	    </div>
	</body>
</html>